{% extends "base.html" %}

{% block title %}{{ 'Editar' if switch else 'Nuevo' }} Switch - Sistema UFRO{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-12">
            <h2><i class="bi bi-ethernet"></i> {{ 'Editar' if switch else 'Nuevo' }} Switch</h2>
            <hr>
        </div>
    </div>

    <form method="POST" class="needs-validation" novalidate>
        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="codigo" class="form-label">Código <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" id="codigo" name="codigo" value="{{ switch.codigo if switch else '' }}" required>
                </div>
            </div>
            <div class="col-md-6">
                <label for="nombre" class="form-label">Nombre</label>
                <input type="text" class="form-control" id="nombre" name="nombre" value="{{ switch.nombre if switch else '' }}">
            </div>
        </div>

        <div class="row">
            <div class="col-md-4">
                <div class="mb-3">
                    <label for="ip" class="form-label">Dirección IP</label>
                    <input type="text" class="form-control" id="ip" name="ip" value="{{ switch.ip if switch else '' }}" placeholder="192.168.1.1">
                </div>
            </div>
            <div class="col-md-4">
                <div class="mb-3">
                    <label for="modelo" class="form-label">Modelo</label>
                    <input type="text" class="form-control" id="modelo" name="modelo" value="{{ switch.modelo if switch else '' }}">
                </div>
            </div>
            <div class="col-md-4">
                <div class="mb-3">
                    <label for="marca" class="form-label">Marca</label>
                    <input type="text" class="form-control" id="marca" name="marca" value="{{ switch.marca if switch else '' }}">
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="numero_serie" class="form-label">Número de Serie</label>
                    <input type="text" class="form-control" id="numero_serie" name="numero_serie" value="{{ switch.numero_serie if switch else '' }}">
                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="gabinete_id" class="form-label">Gabinete</label>
                    <select class="form-select" id="gabinete_id" name="gabinete_id">
                        <option value="">Sin gabinete</option>
                        {% for gabinete in gabinetes %}
                        <option value="{{ gabinete.id }}" {% if switch and switch.gabinete_id == gabinete.id %}selected{% endif %}>
                            {{ gabinete.codigo }} - {{ gabinete.nombre }}
                        </option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-3">
                <div class="mb-3">
                    <label for="puertos_totales" class="form-label">Puertos Totales</label>
                    <input type="number" class="form-control" id="puertos_totales" name="puertos_totales" value="{{ switch.puertos_totales if switch else 0 }}" min="0">
                </div>
            </div>
            <div class="col-md-3">
                <div class="mb-3">
                    <label for="puertos_usados" class="form-label">Puertos Usados</label>
                    <input type="number" class="form-control" id="puertos_usados" name="puertos_usados" value="{{ switch.puertos_usados if switch else 0 }}" min="0">
                </div>
            </div>
            <div class="col-md-3">
                <div class="mb-3">
                    <label for="puertos_disponibles" class="form-label">Puertos Disponibles</label>
                    <input type="number" class="form-control" id="puertos_disponibles" name="puertos_disponibles" value="{{ switch.puertos_disponibles if switch else 0 }}" min="0">
                </div>
            </div>
            <div class="col-md-3">
                <div class="mb-3">
                    <label for="capacidad_poe" class="form-label">Capacidad POE</label>
                    <div class="form-check form-switch mt-2">
                        <input class="form-check-input" type="checkbox" id="capacidad_poe" name="capacidad_poe" {% if switch and switch.capacidad_poe %}checked{% endif %}>
                        <label class="form-check-label" for="capacidad_poe">Sí</label>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4">
                <div class="mb-3">
                    <label for="estado" class="form-label">Estado <span class="text-danger">*</span></label>
                    <select class="form-select" id="estado" name="estado" required>
                        <option value="Activo" {% if switch and switch.estado == 'Activo' %}selected{% endif %}>Activo</option>
                        <option value="Inactivo" {% if switch and switch.estado == 'Inactivo' %}selected{% endif %}>Inactivo</option>
                        <option value="Mantenimiento" {% if switch and switch.estado == 'Mantenimiento' %}selected{% endif %}>Mantenimiento</option>
                    </select>
                </div>
            </div>
            <div class="col-md-4">
                <div class="mb-3">
                    <label for="fecha_alta" class="form-label">Fecha de Alta</label>
                    <input type="date" class="form-control" id="fecha_alta" name="fecha_alta" value="{{ switch.fecha_alta if switch and switch.fecha_alta else '' }}">
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="latitud" class="form-label">Latitud</label>
                    <input type="number" step="any" class="form-control" id="latitud" name="latitud" value="{{ switch.latitud if switch else '' }}" placeholder="-38.7359">
                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="longitud" class="form-label">Longitud</label>
                    <input type="number" step="any" class="form-control" id="longitud" name="longitud" value="{{ switch.longitud if switch else '' }}" placeholder="-72.5904">
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="mb-3">
                    <label for="observaciones" class="form-label">Observaciones</label>
                    <textarea class="form-control" id="observaciones" name="observaciones" rows="3">{{ switch.observaciones if switch else '' }}</textarea>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <button type="submit" class="btn btn-primary"><i class="bi bi-save"></i> Guardar</button>
                <a href="{{ url_for('switches_list') }}" class="btn btn-secondary"><i class="bi bi-x-circle"></i> Cancelar</a>
            </div>
        </div>
    </form>
</div>
{% endblock %}
