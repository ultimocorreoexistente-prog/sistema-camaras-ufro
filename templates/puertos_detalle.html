{% extends "base.html" %}
{% block title %}Detalle Puerto - Sistema UFRO{% endblock %}
{% block content %}
<div class="container mt-4">
    <div class="row mb-4">
        <div class="col-md-6"><h2><i class="bi bi-ethernet"></i> Detalle del Puerto</h2></div>
        <div class="col-md-6 text-end">
            {% if current_user.rol in ['admin', 'supervisor', 'tecnico'] %}
            <a href="{{ url_for('puertos_editar', id=puerto.id) }}" class="btn btn-warning"><i class="bi bi-pencil"></i> Editar</a>
            {% endif %}
            <a href="{{ url_for('puertos_list') }}" class="btn btn-secondary"><i class="bi bi-arrow-left"></i> Volver</a>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="card mb-4">
                <div class="card-header bg-primary text-white"><h5 class="mb-0">Información del Puerto</h5></div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <table class="table table-sm">
                                <tr><th style="width:40%;">Switch:</th><td><a href="{{ url_for('switches_detalle', id=puerto.switch.id) if puerto.switch else '#' }}">{{ puerto.switch.codigo if puerto.switch else 'N/A' }}</a></td></tr>
                                <tr><th>Número de Puerto:</th><td><span class="badge bg-primary">{{ puerto.numero_puerto }}</span></td></tr>
                                <tr><th>Estado:</th><td>
                                    {% if puerto.estado == 'En uso' %}<span class="badge bg-success">{{ puerto.estado }}</span>
                                    {% elif puerto.estado == 'Disponible' %}<span class="badge bg-info">{{ puerto.estado }}</span>
                                    {% else %}<span class="badge bg-danger">{{ puerto.estado }}</span>{% endif %}
                                </td></tr>
                            </table>
                        </div>
                        <div class="col-md-6">
                            <table class="table table-sm">
                                <tr><th style="width:40%;">Cámara:</th><td>
                                    {% if puerto.camara_asignada %}
                                    <a href="{{ url_for('camaras_detalle', id=puerto.camara_asignada.id) }}">{{ puerto.camara_asignada.codigo }}</a>
                                    {% else %}N/A{% endif %}
                                </td></tr>
                                <tr><th>IP Dispositivo:</th><td>{{ puerto.ip_dispositivo or 'N/A' }}</td></tr>
                                <tr><th>Tipo Conexión:</th><td>{{ puerto.tipo_conexion or 'N/A' }}</td></tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% if puerto.nvr_id %}
    <div class="card mb-4">
        <div class="card-header bg-info text-white"><h5 class="mb-0">Conexión NVR</h5></div>
        <div class="card-body">
            <table class="table table-sm">
                <tr><th style="width:20%;">NVR/DVR:</th><td><a href="{{ url_for('nvr_detalle', id=puerto.nvr_id) }}">{{ puerto.nvr.codigo if puerto.nvr else 'N/A' }}</a></td></tr>
                <tr><th>Puerto NVR:</th><td>{{ puerto.puerto_nvr or 'N/A' }}</td></tr>
            </table>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
